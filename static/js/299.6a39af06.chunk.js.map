{"version":3,"file":"static/js/299.6a39af06.chunk.js","mappings":"4NAEO,MAAMA,EAAYC,EAAAA,GAAOC,IAAGC,IAAAA,GAAAC,EAAAA,EAAAA,GAAA,6FAOtBC,EAASJ,EAAAA,GAAOK,OAAMC,IAAAA,GAAAH,EAAAA,EAAAA,GAAA,sR,aCDnC,MA6DA,EA7DgBI,IAAwC,IAAvC,KAAEC,EAAI,QAAEC,EAAO,eAAEC,GAAgBH,EAChD,MAAOI,EAAMC,IAAWC,EAAAA,EAAAA,UAAS,IAC1BC,EAAOC,IAAYF,EAAAA,EAAAA,UAAS,OAC5BG,EAAWC,IAAgBJ,EAAAA,EAAAA,WAAS,IACpCK,EAAaC,IAAkBN,EAAAA,EAAAA,UAAS,IA2B/C,OAvBAO,EAAAA,EAAAA,YAAU,KACUC,WAChB,IACEJ,GAAa,GACb,MAAMK,EAAeC,aAAaC,QAAQ,QACtCC,KAAKC,MAAMH,aAAaC,QAAQ,SAASG,KAAKC,GAAQA,EAAIC,KAC1D,GACEC,OClBUT,gBACHU,EAAAA,EAAMC,IAAI,GAADC,OALN,8CAKkB,SAAS,CAC/CC,OAAQ,CACNvB,OACAwB,MAAO,KDcaC,CAASzB,GACrB0B,EAAgBP,EAAIQ,KAAKX,KAAKY,IAAG,IAClCA,EACHC,WAAUlB,EAAamB,SAASF,EAAIV,QAGtCpB,GAASiC,GAAS,IAAIA,KAASL,IACjC,CAAE,MAAOvB,GACPC,EAjBY,gBAkBd,CAAC,QACCE,GAAa,EACf,GAEF0B,EAAW,GACV,CAAChC,EAAMF,KAGRmC,EAAAA,EAAAA,MAAC7C,EAAS,CAAA8C,SAAA,CACP7B,IAAa8B,EAAAA,EAAAA,KAACC,EAAAA,EAAM,IACpBjC,IAASgC,EAAAA,EAAAA,KAAA,OAAAD,SAAK,mBACfC,EAAAA,EAAAA,KAACE,EAAAA,EAAS,CAACxC,KAAMA,EAAMW,eAAgBA,KACvC2B,EAAAA,EAAAA,KAACG,EAAAA,EAAO,CACNzC,KAAMA,EACN0C,YAAaxC,EACbQ,YAAaA,IAEdV,EAAK2C,OAAS,GAAK3C,EAAK2C,OC9CV,ID8C6B,IAC1CL,EAAAA,EAAAA,KAAC1C,EAAM,CACLgD,KAAK,SACLC,QAASA,KACPzC,EAAQD,EAAO,EAAE,EACjBkC,SACH,gBAIO,C","sources":["pages/Catalog/Catalog.styled.js","pages/Catalog/Catalog.jsx","services/API.js"],"sourcesContent":["import styled from \"styled-components\";\r\n\r\nexport const Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  padding: 50px 128px 150px 128px;\r\n`;\r\n\r\nexport const Button = styled.button`\r\n  color: #3470ff;\r\n  font-family: Manrope;\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  line-height: 1.5;\r\n  text-decoration-line: underline;\r\n  padding: 0 20px;\r\n\r\n  border: none;\r\n  background-color: transparent;\r\n\r\n  &:hover,\r\n  &:focus {\r\n    color: #0b44cd;\r\n  }\r\n`;\r\n","import { useEffect, useState } from \"react\";\r\nimport { fetchAPI, limit } from \"../../services/API\";\r\nimport PropTypes from \"prop-types\";\r\nimport FilterBar from \"../../components/FilterBar/FilterBar\";\r\nimport Gallery from \"../../components/Gallery\";\r\nimport Loader from \"../../components/Loader\";\r\nimport { Container, Button } from \"./Catalog.styled\";\r\n\r\nconst Catalog = ({ cars, setCars, favoriteToggle }) => {\r\n  const [page, setPage] = useState(1);\r\n  const [error, setError] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [visibleCars, setVisibleCars] = useState([]);\r\n\r\n  const ERROR_MSG = \"Error happend\";\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        const favoriteCars = localStorage.getItem(\"favs\")\r\n          ? JSON.parse(localStorage.getItem(\"favs\")).map((fav) => fav.id)\r\n          : [];\r\n        const res = await fetchAPI(page);\r\n        const favoritedCars = res.data.map((car) => ({\r\n          ...car,\r\n          favorite: favoriteCars.includes(car.id) ? true : false,\r\n        }));\r\n\r\n        setCars((prev) => [...prev, ...favoritedCars]);\r\n      } catch (error) {\r\n        setError(ERROR_MSG);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [page, setCars]);\r\n\r\n  return (\r\n    <Container>\r\n      {isLoading && <Loader />}\r\n      {error && <div>Error happend</div>}\r\n      <FilterBar cars={cars} setVisibleCars={setVisibleCars} />\r\n      <Gallery\r\n        cars={cars}\r\n        setFavorite={favoriteToggle}\r\n        visibleCars={visibleCars}\r\n      />\r\n      {cars.length > 0 && cars.length % limit === 0 && (\r\n        <Button\r\n          type=\"button\"\r\n          onClick={() => {\r\n            setPage(page + 1);\r\n          }}\r\n        >\r\n          Load more\r\n        </Button>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nCatalog.propTypes = {\r\n  cars: PropTypes.array.isRequired,\r\n  setCars: PropTypes.func.isRequired,\r\n  favoriteToggle: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Catalog;\r\n","import axios from \"axios\";\r\nexport const BASE_URL = \"https://6474cb4d7de100807b1bc2dc.mockapi.io\";\r\nexport let page = 1;\r\nexport const limit = 8;\r\n\r\nexport const fetchAPI = async (page) => {\r\n  const data = await axios.get(`${BASE_URL}/cars`, {\r\n    params: {\r\n      page,\r\n      limit: 8,\r\n    },\r\n  });\r\n  return data;\r\n};\r\n"],"names":["Container","styled","div","_templateObject","_taggedTemplateLiteral","Button","button","_templateObject2","_ref","cars","setCars","favoriteToggle","page","setPage","useState","error","setError","isLoading","setIsLoading","visibleCars","setVisibleCars","useEffect","async","favoriteCars","localStorage","getItem","JSON","parse","map","fav","id","res","axios","get","concat","params","limit","fetchAPI","favoritedCars","data","car","favorite","includes","prev","fetchData","_jsxs","children","_jsx","Loader","FilterBar","Gallery","setFavorite","length","type","onClick"],"sourceRoot":""}